# Infra Work Organization

Author: qians

Date: 2023/4/28

Version: 0.0.1

## 方向及优先级

1. 单体性能优化
   - [ ] 推送消息时, 群用户列表的获取.
      - [ ] 维护和更新(Join, Leave)群组用户在线状态.
      - [ ] 群组用户在线状态由内存转移至持久化存储(硬盘).
   - [ ] 推送群消息时, 额外用户无法通过Router找到.
      - 推送群消息时, 如果额外用户按照私聊处理, 但并未及时从在线状态缓存中清除, 会导致重复推送.
   - [ ] 推送消息时, 每个用户真正推送时才进行编码, 每条消息1: N. 需要优化.
   - [ ] 群消息多合一批量推送(聚合时需要解决消息乱序和错漏问题).
   - [ ] 内存使用优化, 保证程序长期稳定运行.
   - [ ] 连接管理优化, 优化群发消息时成员列表的获取方式.
   - [ ] Redis状态更新和离线(目前只实现了服务器上线时去Redis登记, 没有进行状态更新和离线, 不影响消息推送, 但会带来额外的服务器负担).
   - [ ] 服务运行负载监控及限流方案设计实施.

2. 集群方案实现

为了实现10w人超级大群的推送需求, 共需两个集群来共同完成推送任务(Proxy, Link)